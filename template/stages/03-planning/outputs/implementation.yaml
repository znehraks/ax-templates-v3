# Snake Game - Implementation Rules
# 생성일: 2026-01-21
# 스테이지: 03-planning

project:
  name: snake-game
  type: game
  framework: react
  language: typescript

# 컴포넌트 규칙
components:
  type: functional  # functional | class
  naming: PascalCase
  file_extension: tsx

  # 컴포넌트 구조
  structure:
    - props_interface  # Props 인터페이스 정의
    - component_function
    - exports

  # 컴포넌트 카테고리
  categories:
    - name: containers
      path: src/
      examples: [App.tsx, GameEngine.tsx]
    - name: presentation
      path: src/components/
      examples: [CanvasLayer.tsx, ScoreBoard.tsx]
    - name: ui
      path: src/components/
      examples: [GameOverModal.tsx, MobileControls.tsx]

# 스타일링 규칙
styling:
  method: css-modules  # css-modules | tailwind | styled-components
  naming: kebab-case
  file_pattern: "{ComponentName}.module.css"

  # 색상 변수 (CSS Custom Properties)
  colors:
    background: "#1a1a2e"
    grid: "#16213e"
    snake: "#00ff88"
    snake_head: "#00cc6a"
    food: "#ff6b6b"
    text: "#ffffff"

# 상태 관리
state_management:
  global: useReducer  # context | redux | zustand | useReducer
  local: useState
  refs: useRef  # 게임 루프, Canvas ref

  # 상태 분리 원칙
  principles:
    - "UI 리렌더링 필요한 상태 → useReducer"
    - "빠른 업데이트 필요한 상태 → useRef"
    - "Canvas DOM 참조 → useRef"

# 훅 규칙
hooks:
  naming: "use{Name}"
  location: src/hooks/

  # 커스텀 훅 목록
  custom:
    - name: useGameLoop
      purpose: requestAnimationFrame 기반 게임 루프
    - name: useKeyboard
      purpose: 키보드 입력 처리
    - name: useSwipe
      purpose: 터치 스와이프 감지
    - name: useHighScore
      purpose: localStorage 최고점수 관리

# 타입 정의 규칙
types:
  location: src/types/
  naming: PascalCase

  # 핵심 타입
  core:
    - Point
    - Direction
    - GameStatus
    - GameState
    - GameAction
    - GameConfig

# 상수 규칙
constants:
  location: src/constants/
  naming: SCREAMING_SNAKE_CASE

  # 핵심 상수
  core:
    - GAME_CONFIG
    - COLORS
    - INITIAL_SNAKE
    - DIRECTION_VECTORS
    - OPPOSITE_DIRECTIONS

# 유틸리티 규칙
utilities:
  location: src/utils/
  naming: camelCase

  # 유틸리티 함수
  functions:
    - generateRandomPosition
    - isCollision
    - isValidDirection

# 폴더 구조
folder_structure:
  type: type-based  # feature-based | type-based

  structure:
    src:
      - components/  # React 컴포넌트
      - hooks/       # 커스텀 훅
      - engine/      # 게임 로직 (reducer, collision, renderer)
      - types/       # TypeScript 타입
      - constants/   # 상수
      - utils/       # 유틸리티 함수
      - styles/      # 글로벌 스타일
      - assets/      # 정적 자산

# 파일 명명 규칙
file_naming:
  components: PascalCase.tsx
  hooks: camelCase.ts
  types: index.ts  # 단일 파일 또는 camelCase.ts
  constants: camelCase.ts
  utils: camelCase.ts
  styles: index.css 또는 {Component}.module.css

# 임포트 규칙
imports:
  order:
    - react  # React 관련
    - external  # 외부 라이브러리
    - internal  # 내부 모듈 (절대 경로)
    - relative  # 상대 경로
    - styles  # 스타일
    - types  # 타입

  alias:
    "@": src/

# 코드 품질
code_quality:
  eslint: true
  prettier: true
  typescript_strict: true

  rules:
    - "no-any: 가능한 한 any 타입 사용 금지"
    - "explicit-return-types: 함수 반환 타입 명시"
    - "no-unused-vars: 미사용 변수 금지"

# 테스트 규칙
testing:
  framework: vitest
  location: src/__tests__/ 또는 컴포넌트 옆 {name}.test.ts

  coverage_target: 80%

  naming:
    unit: "{name}.test.ts"
    e2e: "{feature}.e2e.ts"

# 성능 규칙
performance:
  # Canvas 최적화
  canvas:
    - "requestAnimationFrame 사용"
    - "오프스크린 캔버스 고려"
    - "불필요한 리렌더링 방지"

  # React 최적화
  react:
    - "React.memo 필요시 사용"
    - "useCallback/useMemo 과도한 사용 자제"
    - "게임 상태는 useRef로 관리"

# Git 커밋 규칙
git:
  conventional_commits: true

  types:
    feat: 새 기능
    fix: 버그 수정
    refactor: 리팩토링
    test: 테스트
    docs: 문서
    style: 포맷팅
    chore: 기타

# 금지 사항
prohibited:
  - "외부 게임 엔진 (Phaser, PixiJS 등)"
  - "jQuery"
  - "Class 컴포넌트 (함수형만 사용)"
  - "any 타입 남용"
  - "전역 변수"
  - "setInterval (requestAnimationFrame 대신 사용)"
