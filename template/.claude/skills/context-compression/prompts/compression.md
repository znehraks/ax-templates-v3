# Context Compression Prompts

컨텍스트 압축 및 복구 시 사용되는 프롬프트 템플릿입니다.

## 토큰 경고 프롬프트

### 50,000 토큰 (경고)

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚠️ 컨텍스트 사용량 경고
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

현재 토큰: ~{{CURRENT_TOKENS}} / 80,000
상태: {{PERCENTAGE}}% 사용

권장 조치:
1. /context --compress 로 압축
2. 또는 /context --save 로 저장 후 /clear

현재 스테이지: {{CURRENT_STAGE}}
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 80,000 토큰 (한도)

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔴 컨텍스트 한도 도달
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

토큰 한도(80,000)에 도달했습니다.

자동 저장 실행 중...

[저장 내용]
• 현재 스테이지: {{CURRENT_STAGE}}
• 진행 상황: {{PROGRESS}}
• 결정사항: {{DECISION_COUNT}}개

저장 위치: state/context/state.md

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
/clear 후 작업을 계속하려면 state.md를 참조하세요.
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 압축 결과 프롬프트

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 컨텍스트 압축 완료
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[압축 요약]
• 압축 전: {{BEFORE_TOKENS}} 토큰
• 압축 후: {{AFTER_TOKENS}} 토큰
• 절감: {{SAVED_PERCENTAGE}}%

[유지된 항목]
• 결정사항: {{DECISION_COUNT}}개
• 요구사항: {{REQUIREMENT_COUNT}}개
• 현재 작업: {{CURRENT_TASK}}

[요약된 항목]
• 토론: {{DISCUSSION_COUNT}}개 → {{SUMMARY_COUNT}}개
• 코드 리뷰: {{REVIEW_COUNT}}개

[제거된 항목]
• 오류 로그: {{ERROR_COUNT}}개
• 시행착오: {{RETRY_COUNT}}개

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
저장: state/context/state.md
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 복구 프롬프트

### 복구 제안

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📂 저장된 컨텍스트 발견
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

저장 시점: {{SAVED_AT}}
스테이지: {{STAGE}}
진행 상황: {{PROGRESS_SUMMARY}}

복구하시겠습니까?

[Y] 복구하고 계속
[N] 새로 시작
[V] 내용 미리보기
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 복구 완료

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 컨텍스트 복구 완료
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

[복구된 상태]
• 스테이지: {{CURRENT_STAGE}}
• 진행: {{COMPLETED}}/{{TOTAL}} 완료
• 다음 작업: {{NEXT_TASK}}

[핵심 결정사항]
{{#each DECISIONS}}
• {{this.title}}: {{this.choice}}
{{/each}}

[참조 파일]
• stages/{{STAGE}}/CLAUDE.md
• stages/{{STAGE}}/outputs/

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
{{NEXT_TASK}}부터 계속하시겠습니까?
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## state.md 미리보기 프롬프트

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📄 state.md 미리보기
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# 작업 상태 저장 - {{TIMESTAMP}}

## 현재 스테이지
{{STAGE_ID}}: {{STAGE_NAME}}

## 진행 상황
- 완료: {{COMPLETED_LIST}}
- 진행 중: {{CURRENT}}
- 대기: {{PENDING_LIST}}

## 핵심 결정사항
{{#each DECISIONS}}
- {{this.title}}: {{this.choice}} ({{this.reason}})
{{/each}}

...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[R] 복구 / [E] 편집 후 복구 / [C] 취소
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 스테이지 전환 시 압축 제안

```
스테이지 전환 감지: {{PREV}} → {{NEXT}}

이전 스테이지 컨텍스트를 정리하시겠습니까?

[정리 대상]
• {{PREV}} 관련 토론: ~{{TOKENS}} 토큰
• 시행착오 기록: ~{{ERROR_TOKENS}} 토큰

[유지 항목]
• HANDOFF.md 내용
• 핵심 결정사항

[Y] 정리 후 전환
[N] 그대로 전환
[S] 전체 저장 후 전환
```
